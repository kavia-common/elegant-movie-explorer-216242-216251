{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing movie data in a Vue.js frontend. It includes interfaces, state variables, and functions for fetching, adding, removing, and updating movies, interfacing with a Supabase backend.", "external_files": ["@/lib/supabaseClient", "./auth"], "external_methods": ["supabase.from()", "supabase.select()", "supabase.insert()", "supabase.delete()", "supabase.update()"], "published": ["useMoviesStore"], "classes": [], "methods": [{"name": "fetchAll", "description": "Fetches all movies for the current authenticated user from the database."}, {"name": "async function add(movie: Omit<MovieRecord, 'id' | 'user_id' | 'created_at'>) { add", "description": "Adds a new movie to the database and updates the store with optimistic UI support.", "scope": "", "scopeKind": ""}, {"name": "async function remove(id: string) { remove", "description": "Removes a movie by ID from the database and the store.", "scope": "", "scopeKind": ""}, {"name": "async function update(id: string, patch: Partial<Pick<MovieRecord, 'title' | 'notes'>>) { update", "description": "Updates a movie's details in the database and the store.", "scope": "", "scopeKind": ""}], "calls": ["supabase.from('movies').select()", "supabase.from('movies').insert()", "supabase.from('movies').delete()", "supabase.from('movies').update()"], "search-terms": ["movies store", "Pinia", "Vue", "supabase", "MovieRecord", "useMoviesStore", "frontend_vue"], "state": 2, "file_id": 23, "knowledge_revision": 65, "git_revision": "", "revision_history": [{"52": ""}, {"62": ""}, {"65": ""}], "ctags": [{"_type": "tag", "name": "MovieRecord", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^export interface MovieRecord {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  async function add(movie: Omit<MovieRecord, 'id' | 'user_id' | 'created_at'>) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      created_at: new Date().toISOString(),$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  created_at?: string$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: insErr } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: qErr } = await supabase$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: upErr } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "update", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: insErr } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: qErr } = await supabase$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { data, error: upErr } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "update", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const { error: delErr } = await supabase.from('movies').delete().eq('id', id)$/", "language": "TypeScript", "kind": "constant", "scope": "remove", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  id: string$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^    items.value = [optimistic, ...items.value]$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      notes: movie.notes ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  notes?: string | null$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      notes: movie.notes ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      tmdb_id: movie.tmdb_id ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "optimistic", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^    const optimistic: MovieRecord = {$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "prev", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^    const prev = [...items.value]$/", "language": "TypeScript", "kind": "constant", "scope": "remove", "scopeKind": "function"}, {"_type": "tag", "name": "prev", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^    const prev = [...items.value]$/", "language": "TypeScript", "kind": "constant", "scope": "update", "scopeKind": "function"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const rec = (data as MovieRecord)$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      const rec = (data as MovieRecord)$/", "language": "TypeScript", "kind": "constant", "scope": "update", "scopeKind": "function"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  async function remove(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      title: movie.title,$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  title: string$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "tmdb_id", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^      tmdb_id: movie.tmdb_id ?? null,$/", "language": "TypeScript", "kind": "constant", "scope": "add", "scopeKind": "function"}, {"_type": "tag", "name": "tmdb_id", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  tmdb_id?: number | null$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  async function update(id: string, patch: Partial<Pick<MovieRecord, 'title' | 'notes'>>) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useMoviesStore", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^export const useMoviesStore = defineStore('movies', () => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/elegant-movie-explorer-216242-216251/frontend_vue/src/stores/movies.ts", "pattern": "/^  user_id: string$/", "language": "TypeScript", "kind": "property", "scope": "MovieRecord", "scopeKind": "interface"}], "hash": "beb5371c35e89d9ad0f9c6b6fdabf359", "format-version": 4, "code-base-name": "frontend_vue", "filename": "frontend_vue/src/stores/movies.ts", "fields": [{"name": "export interface MovieRecord {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_at?: string", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "id: string", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "notes?: string | null", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "title: string", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "tmdb_id?: number | null", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "user_id: string", "scope": "MovieRecord", "scopeKind": "interface", "description": "unavailable"}]}